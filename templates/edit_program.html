{% extends 'base.html' %}

{% block title %}ุชุนุฏูู ุงูุจุฑูุงูุฌ{% endblock %}

{% block content %}
<div class="card">
    <a href="{{ url_for('manage_programs') }}" class="back-link">โ ุงูุนูุฏุฉ ูุฅุฏุงุฑุฉ ุงูุจุฑุงูุฌ</a>
    
    <h2> ุชุนุฏูู ุงูุจุฑูุงูุฌ</h2>
    
    <div class="program-info-box">
        <p><strong>ุงุณู ุงูููู:</strong> <span class="ltr">{{ program.EnglishName }}</span></p>
        <p><strong>ุนุฏุฏ ุงููุณุชุฎุฏููู:</strong> {{ total_users }} (ุงุณุชูููุง: {{ received_users }})</p>
    </div>
    
    <!-- Update Program Name -->
    <div class="section">
        <h3> ุชุนุฏูู ุงุณู ุงูุจุฑูุงูุฌ</h3>
        <form method="POST" class="program-form">
            <input type="hidden" name="action" value="update_name">
            <div class="form-group">
                <label for="arabic_name">ุงุณู ุงูุจุฑูุงูุฌ (ุจุงูุนุฑุจู)</label>
                <input type="text" 
                       id="arabic_name" 
                       name="arabic_name" 
                       value="{{ program.ArabicName }}"
                       required>
            </div>
            <button type="submit" class="btn btn-primary">ุญูุธ ุงูุชุบููุฑุงุช</button>
        </form>
    </div>
    
    <hr class="section-divider">
    
    <!-- Add User Manually -->
    <div class="section">
        <h3>โ ุฅุถุงูุฉ ูุณุชุฎุฏู ูุฏููุงู</h3>
        <form method="POST" class="program-form">
            <input type="hidden" name="action" value="add_user">
            <div class="form-row">
                <div class="form-group">
                    <label for="national_id">ุฑูู ุงููููุฉ</label>
                    <input type="text" 
                           id="national_id" 
                           name="national_id" 
                           placeholder="ุฃุฏุฎู ุฑูู ุงููููุฉ"
                           class="ltr-input"
                           inputmode="numeric"
                           required>
                </div>
                <div class="form-group">
                    <label for="full_name">ุงูุงุณู ุงููุงูู</label>
                    <input type="text" 
                           id="full_name" 
                           name="full_name" 
                           placeholder="ุฃุฏุฎู ุงูุงุณู ุงููุงูู"
                           required>
                </div>
            </div>
            <button type="submit" class="btn btn-success">ุฅุถุงูุฉ ุงููุณุชุฎุฏู</button>
        </form>
    </div>
    
    <hr class="section-divider">
    
    <!-- Open CSV File -->
    <div class="section">
        <h3>๐ ูุชุญ ููู CSV</h3>
        <p class="help-text">ุงูุชุญ ูุฌูุฏ ุงูุจุฑูุงูุฌ ูุชุนุฏูู ููู CSV ูุฏููุงู</p>
        <a href="{{ url_for('open_csv_folder', english_name=program.EnglishName) }}" class="btn btn-secondary">
            ๐ ูุชุญ ูุฌูุฏ ุงูุจุฑูุงูุฌ
        </a>
    </div>
    
    <hr class="section-divider">
    
    <!-- Import CSV -->
    <div class="section">
        <h3>๐ฅ ุงุณุชูุฑุงุฏ ูู ููู CSV</h3>
        <p class="help-text">
            ุงุณุชูุฑุงุฏ ูุงุฆูุฉ ูุณุชุฎุฏููู ูู ููู CSV. ูุฌุจ ุฃู ูุญุชูู ุงูููู ุนูู ุนููุฏูู:<br>
            <code>NationalID</code> ู <code>FullName</code><br>
            ุฃู ุจุงูุนุฑุจู: <code>ุฑูู ุงููููุฉ</code> ู <code>ุงูุงุณู ุงููุงูู</code>
        </p>
        <form method="POST" enctype="multipart/form-data" class="program-form">
            <input type="hidden" name="action" value="import_csv">
            <div class="form-group">
                <label for="csv_file">ุงุฎุชุฑ ููู CSV</label>
                <input type="file" 
                       id="csv_file" 
                       name="csv_file" 
                       accept=".csv"
                       class="file-input"
                       required>
            </div>
            <button type="submit" class="btn btn-info">ุงุณุชูุฑุงุฏ ุงููุณุชุฎุฏููู</button>
        </form>
        
        <div class="import-template">
            <p><strong>ูุซุงู ุนูู ุตูุบุฉ ุงูููู:</strong></p>
            <pre class="code-block">NationalID,FullName
1234567890,ุฃุญูุฏ ูุญูุฏ
9876543210,ุณุงุฑุฉ ุนูู</pre>
        </div>
    </div>
</div>
{% endblock %}
